{{define "content"}}
<div class="page-header">
    <h1>{{.Product.Name}}</h1>
    <div class="header-actions">
        <button onclick="deleteProduct({{.Product.ID}})" class="btn btn-danger">Delete</button>
    </div>
</div>

<div class="product-detail">
    <div class="detail-grid">
        <div class="detail-item">
            <label>Price</label>
            <span class="detail-value price">${{printf "%.2f" .Product.Price}}</span>
        </div>
        <div class="detail-item">
            <label>Category</label>
            <span class="detail-value">{{.Product.Category}}</span>
        </div>
        <div class="detail-item">
            <label>Stock Status</label>
            <span class="detail-value">
                {{if .Product.InStock}}
                    <span class="badge badge-success">In Stock</span>
                {{else}}
                    <span class="badge badge-danger">Out of Stock</span>
                {{end}}
            </span>
        </div>
        <div class="detail-item">
            <label>Quantity</label>
            <span class="detail-value" id="product-quantity">{{.Product.Quantity}}</span>
        </div>
    </div>

    {{if .Product.Description}}
    <div class="detail-description">
        <label>Description</label>
        <p>{{.Product.Description}}</p>
    </div>
    {{end}}

    <div class="detail-actions">
        {{if .Product.InStock}}
        <button onclick="purchaseProduct({{.Product.ID}})" class="btn btn-primary">Purchase</button>
        {{end}}
        <a href="/" class="btn">‚Üê Back to Products</a>
    </div>
</div>

{{if .Variants}}
<div class="variants-section">
    <h2>Variants</h2>
    <table class="product-table">
        <thead>
            <tr>
                <th>Variant</th>
                <th>SKU</th>
                <th>Price</th>
                <th>Stock</th>
                <th>Quantity</th>
                <th>Attributes</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {{range .Variants}}
            <tr>
                <td class="variant-name">{{.Name}}</td>
                <td><code>{{.SKU}}</code></td>
                <td class="price">${{printf "%.2f" .Price}}</td>
                <td>
                    {{if .InStock}}
                        <span class="badge badge-success">In Stock</span>
                    {{else}}
                        <span class="badge badge-danger">Out of Stock</span>
                    {{end}}
                </td>
                <td><span class="variant-qty" id="variant-qty-{{.ID}}">{{.Quantity}}</span></td>
                <td>
                    {{range $key, $val := .Attributes}}
                        <span class="attribute-tag">{{$key}}: {{$val}}</span>
                    {{end}}
                </td>
                <td>
                    {{if .InStock}}
                    <button onclick="purchaseVariant({{.ProductID}}, {{.ID}})" class="btn btn-sm btn-primary">Buy</button>
                    {{end}}
                </td>
            </tr>
            {{end}}
        </tbody>
    </table>
</div>
{{end}}
{{end}}
